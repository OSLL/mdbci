#!/bin/bash
# -*- ruby -*-
bindir=$( cd "${0%/*}"; pwd )
executable=$bindir/${0##*/}
unset GEM_PATH
unset GEM_HOME
# switch to correct gem home before running the executable
export APP_DIR=$( cd $bindir/..; pwd )
. $APP_DIR/share/gem_home/gem_home.sh
gem_home $APP_DIR/../vagrant-gems
exec ruby -x "$executable" "$@"
#!/workspace/application/build/mdbci.AppDir/usr/bin/ruby
#
# This file was generated by RubyGems.
#
# The application 'vagrant' is installed as part of a gem, and
# this file is here to facilitate running it.
#

application_dir = ENV['APP_DIR']

new_env = {
  'VAGRANT_EXECUTABLE' => __FILE__,
  'VAGRANT_INSTALLER_ENV' => '1',
  'VAGRANT_INSTALLER_VERSION' => '2',
  'VAGRANT_INSTALLER_EMBEDDED_DIR' => application_dir,
}
# Store the "current" environment so Vagrant can restore it when shelling out.
ENV.each_pair do |key, value|
  new_env["VAGRANT_OLD_ENV_#{key}"] = value
end

new_env.each_pair do |key, value|
  ENV[key] = value
end

# Standard rubygems file contains

require 'rubygems'

version = ">= 0.a"

if ARGV.first
  str = ARGV.first
  str = str.dup.force_encoding("BINARY") if str.respond_to? :force_encoding
  if str =~ /\A_(.*)_\z/ and Gem::Version.correct?($1) then
    version = $1
    ARGV.shift
  end
end

if Gem.respond_to?(:activate_bin_path)
load Gem.activate_bin_path('vagrant', 'vagrant', version)
else
gem "vagrant", version
load Gem.bin_path("vagrant", "vagrant", version)
end
